<!doctype html>
<!-- Auteur : David Roche @davR74130 -->
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>S√©curisation des communications</title>
		<link rel="stylesheet" href="css/css/vendor/bootstrap.min.css">
		<link rel="stylesheet" href="css/css/flat-ui.min.css">
		<link rel="stylesheet" href="highlight/styles/tomorrow-night.css">
		<link rel="stylesheet" href="css/style.css">
		<script src="highlight/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
    <script src="./css/js/vendor/jquery.min.js"></script>
    <script src="./css/js/flat-ui.min.js"></script>
		<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-53303169-1"></script>
	<script>
  		window.dataLayer = window.dataLayer || [];
  		function gtag(){dataLayer.push(arguments);}
  		gtag('js', new Date());

  		gtag('config', 'UA-53303169-1');
	</script>
	</head>
	<body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">NSI terminale</span>
					<span class="navbar-brand">S√©curisation des communications</span>
        </div>
      </div>
    </nav>
    <div class="container act">
			<p>
				Soit 2 individus A et B qui cherchent √† s'envoyer des messages par l'interm√©diaire d'un r√©seau informatique. A et B d√©sirent qu'une tierce personne (par exemple P) ne soit pas capable de lire les messages
				si par hasard ces derniers devaient √™tre intercept√©s par P. Pour ce faire, A va chiffrer le message . Toute personne qui ne poss√©dera pas le moyen de d√©chiffrer ce message chiffr√© se verra dans l'impossibilit√© de comprendre le contenu du message (si P intercepte le message chiffr√© et
				qu'il ne poss√®de pas le moyen de d√©chiffrer ce message, l'interception aura √©t√© totalement inutile puisque P sera dans l'incapacit√© de comprendre le contenu du message).
				Il existe 2 grands types de chiffrement : le chiffrement sym√©trique et le chiffrement asym√©trique.
			</p>
			<h4>Le chiffrement sym√©trique</h4>
			<p>
				Pour chiffrer un message, A va utiliser une suite de caract√®re que l'on appelle "cl√© de chiffrement". Dans le cas du chiffrement sym√©trique, cette cl√© de chiffrement sera aussi utilis√©e par B pour d√©chiffrer le message envoy√© par A. Dans ce cas, la cl√© de chiffrement est identique √† la cl√© de d√©chiffrement.
				Concr√®tement comment cela se  passe-t-il ?
			</p>
			<p>
				Avant d'entrer dans le vif du sujet, il faut savoir que l'id√©e de chiffrer des messages (de les rendre illisibles pour des personnes non autoris√©es) ne date pas du d√©but de l'√®re de l'informatique.
				En effet, d√®s l'antiquit√©, on cherchait d√©j√† √† s√©curiser les communications en chiffrant les messages sensibles (pour en savoir plus sur l'histoire du chiffrement, n'h√©sitez pas √† consulter la page <a href="https://fr.wikipedia.org/wiki/Histoire_de_la_cryptologie" target="_blank">Wikip√©dia</a> consacr√©e √† ce sujet).
				Nous nous int√©resserons ici uniquement aux communications ayant lieu par l'interm√©diaire d'un r√©seau informatique. Comme nous avons d√©j√† eu l'occasion de le voir en premi√®re, toute "donn√©e informatique" peut √™tre vue comme une suite de z√©ro et de un.
				Nous chercherons donc √† chiffrer une suite de z√©ro et de un :
			</p>
			<p>
				Soit le message "Hello World!" ce qui nous donnera en binaire :
			</p>
			<pre><code>
010010000110010101101100011011000110111100100000010101110110111101110010011011000110010000100001
			</code></pre>
			<p>
				N.B. nous avons simplement utilis√© le code ASCII de chaque caract√®re (par exemple, on peut v√©rifier que le H correspond bien √† l'octet 01001000). Pour effectuer la "conversion" texte vers code binaire ASCII ou vis versa, vous pouvez utiliser le site <a href="https://www.rapidtables.com/convert/number/ascii-to-binary.html" target="_blank">https://www.rapidtables.com/convert/number/ascii-to-binary.html</a>
			</p>
			<p>
				Choisissons maintenant un mot (ou une phrase) qui nous servira de cl√© de chiffrement, prenons pour exemple le mot "toto". "toto" nous donne en binaire :
			</p>
			<pre><code>
01110100011011110111010001101111
			</code></pre>
			<p>
				Pour chiffrer le message nous allons effectuer un XOR bit √† bit. Pour rappel, vous trouverez la table de v√©rit√© du XOR ci-dessous :
			</p>
			<p>
				Table de v√©rit√© "XOR" :
			</p>
			<table>
				<tr>
						<td width=100px>E1</td>
						<td width=100px>E2</td>
						<td width=100px>S</td>
				</tr>
				<tr>
						<td>0</td>
						<td>0</td>
						<td>0</td>
				</tr>
				<tr>
						<td>0</td>
						<td>1</td>
						<td>1</td>
				</tr>
				<tr>
						<td>1</td>
						<td>0</td>
						<td>1</td>
				</tr>
				<tr>
						<td>1</td>
						<td>1</td>
						<td>0</td>
				</tr>
				</table>

				<p>
					Comme la cl√© est plus courte que le message, il faut "reproduire" la cl√© vers la droite autant de fois que n√©cessaire (si la taille du message n'est pas un multiple de la taille de la cl√©, on peut reproduire seulement quelques bits de la cl√© pour la fin du message):
				</p>
					<img src="img/nsi_term_secu_1.png"/>
				<p>
					Le signe + dans un cercle symbolise le XOR
				</p>
				<p>
					Apr√®s ce XOR on obtient donc la suite de bits suivante :
				</p>
				<pre><code>
001111000000101000011000000000110001101101001111001000110000000000000110000000110001000001001110
				</code></pre>
				<p>
					Soit la chaine de caract√®res suivante (si on cherche √† afficher le message chiffr√© avec un √©diteur de texte) : O#N
				</p>
				<p>
					Maintenant ce message est pr√™t pour √™tre envoy√© √† son destinataire B. Si P intercepte le message est cherche √† le lire avec un √©diteur de texte, il obtiendra la suite de caract√®re O#N
				</p>
				<p>
					B a maintenant re√ßu le message chiffr√©, il poss√®de la cl√© (toto), il va donc pouvoir d√©chiffrer le message en appliquant un XOR entre le message chiffr√© et la cl√© (on applique exactement la m√™me m√©thode que ci-dessus).
				</p>
			</p>
				<img src="img/nsi_term_secu_2.png"/>
			<p>
				<p>
					On trouve le code binaire suivant :
				</p>
				<pre><code>
010010000110010101101100011011000110111100100000010101110110111101110010011011000110010000100001
				</code></pre>
				<p>
					Vous pouvez remarquer que nous avons bien retrouv√© le code binaire d'origine. Si vous ne voulez pas vous emb√™ter √† v√©rifier bit par bit, vous pouvez utiliser ce <a href="https://www.rapidtables.com/convert/number/binary-to-ascii.html">site</a>  qui vous permettra de repasser du code binaire ASCII au texte.
				</p>
				<p>
					On retrouve bien le message d'origine : Hello World!, B a pu lire le message envoy√© par A alors que pour P, malgr√© le fait qu'il a pu intercepter le message, il n'a pas pu prendre connaissance de son contenu sans la cl√©.
				</p>
				<h4>√Ä faire vous-m√™me 1</h4>
				<p>
					Vous allez jouer le r√¥le de A. Choisissez une ou un camarade dans la classe qui jouera le r√¥le de B. Mettez vous d'accord avec B sur une cl√© de chiffrement/d√©chiffrement (choisissez un mot qui jouera le r√¥le de cl√©, ce mot doit rester secret).
					Choisissez un message √† faire parvenir √† B puis proc√©der au chiffrement de ce message, notez le r√©sultat du chiffrement (en binaire) sur une feuille. Donnez cette feuille √† une ou un camarade tiers (qui ne connait pas la cl√©, ce camarade jouera donc le r√¥le de P).
					P devra recopier le message avant de le transmettre √† B. P devra essayer de trouver le message envoyer par A √† B. B devra d√©chiffrer le message √† l'aide de la cl√©. Vous pourrez utiliser les sites cit√©s plus haut afin d'assurer le passage texte -> code ASCII binaire et code ASCII binaire-> texte.
				</p>
				<hr />
				<p>
					La m√©thode la plus utilis√©e en mati√®re de chiffrement sym√©trique se nomme AES (Advanced Encryption Standard). Cette m√©thode utilise une technique de chiffrement plus √©labor√©e que ce qui a √©t√© vu ci-dessus, mais les grands principes restent identiques.
				</p>
				<p>
					Le gros probl√®me avec le chiffrement sym√©trique, c'est qu'il est n√©cessaire pour A et B de se mettre d'accord √† l'avance sur la cl√© qui sera utilis√©e lors des √©changes. Le chiffrement asym√©trique permet d'√©viter ce probl√®me.
				</p>
				<h4>Le chiffrement asym√©trique</h4>
				<p>
					Dans le cas du chiffrement asym√©trique A et B n'ont pas besoin de partager une "cl√© secr√®te" :
				</p>
				<ul>
					<li>
						A poss√®de une "cl√© priv√©e" que l'on notera kprA et une "cl√© publique" que l'on notera kpuA. En aucun cas A ne devra divulguer sa cl√© priv√©e √† quiconque, elle devra rester strictement secr√®te. En revanche sa cl√© publique pourra √™tre connue de tout le monde sans aucun probl√®me.
					</li>
					<li>
						B poss√®de une "cl√© priv√©e" que l'on notera kprB et une "cl√© publique" que l'on notera kpuB. En aucun cas B ne devra divulguer sa cl√© priv√©e √† quiconque, elle devra rester strictement secr√®te. En revanche sa cl√© publique pourra √™tre connue de tout le monde sans aucun probl√®me.
					</li>
				</ul>
				<div class="centrer">
					<img src="img/nsi_term_secu_3.png"/>
				</div>

			<p>
				Si A d√©sire envoyer un message m √† B, il va utiliser la cl√© publique de B afin de r√©aliser le chiffrement (m est chiffr√© en m'). Le message chiffr√© (m') va ensuite pouvoir transiter entre A et B. Une fois le message m' en sa possession, B va utiliser sa cl√© priv√©e afin de pouvoir d√©chiffrer le message m' et ainsi obtenir le message m. Le processus peut √™tre r√©sum√© par le sch√©ma suivant :
			</p>
			<div class="centrer">
				<img src="img/nsi_term_secu_4.png"/>
			</div>
			<p>
				Si P intercepte le message m', il sera incapable de d√©terminer m √† partir de m' sans la cl√© priv√©e de B.
			</p>
			<p>
				Le chiffrement asym√©trique repose sur des probl√®mes tr√®s difficiles √† r√©soudre dans un sens et faciles √† r√©soudre dans l'autre sens. Prenons un exemple : l'algorithme de chiffrement asym√©trique RSA (du nom de ses 3 inventeurs : Rivest Shamir et Adleman), est tr√®s couramment utilis√©, notamment dans tout ce qui touche au commerce √©lectronique.
				RSA se base sur la factorisation des tr√®s grands nombres premiers. Si vous prenez un nombre premier A (par exemple A = 16813007) et un nombre premier B (par exemple B = 258027589), il facile de d√©terminer C le produit de A par B (ici on a A x B = C avec C = 4338219660050123). En revanche si je vous donne C (ici 4338219660050123) il est tr√®s difficile
				de retrouver A et B. En tous les cas, √† ce jour, aucun algorithme n'est capable de retrouver A et B connaissant C dans un temps "raisonnable". Nous avons donc bien ici un probl√®me relativement facile dans un sens (trouver C √† partir de A et B) est extr√™mement difficile dans l'autre sens (trouver A et B √† partir de C). Les d√©tails du fonctionnement de RSA sont relativement complexes (math√©matiquement parlant) et ne seront pas abord√©s ici. Vous devez juste savoir qu'il existe un lien   entre une cl√© publique et la cl√© priv√©e correspondante, mais qu'il est quasiment impossible de trouver la cl√© priv√©e de quelqu'un √† partir de sa cl√© publique.
			</p>
			<h4>
				Le protocole HTTPS
			</h4>
			<p>
				Nous allons maintenant voir une utilisation concr√®te de ces chiffrements sym√©triques et asym√©triques : le protocole HTTPS.
			</p>
			<p>
				Avant de parler du protocole HTTPS, petit retour sur le protocole HTTP : un client effectue une requ√™te HTTP vers un serveur, le serveur va alors r√©pondre √† cette requ√™te (par exemple en envoyant une page HTML au client). Si n√©cessaire
				n'h√©sitez pas √† consulter ce qui a √©t√© fait en <a href="nsi_prem_http.html" target="_blank">premi√®re</a> pour plus de d√©tails.
			</p>
			<div class="centrer">
				<img src="img/nsi_term_secu_5.png"/>
				<figcaption>√©change client-serveur protocole HTTP</figcaption>
			</div>
			<p>
				Le protocole HTTP pose 2 probl√®mes en termes de s√©curit√© informatique :
			</p>
			<ul>
				<li>
					Un individu qui intercepterait les donn√©es transitant entre le client et le serveur pourrait les lire sans aucun probl√®me (ce qui serait probl√©matique notamment avec un site de e-commerce au moment o√π le client envoie des donn√©es bancaires)
				</li>
				<li>
					gr√¢ce √† une technique qui ne sera pas d√©taill√©e ici (le <a href="https://fr.wikipedia.org/wiki/Empoisonnement_du_cache_DNS" target="_blank">DNS spoofing</a>), un serveur "pirate" peut se faire passer pour un site sur lequel vous avez l'habitude de vous rendre en toute confiance :
					imaginez vous voulez consulter vos comptes bancaires en ligne, vous saisissez l'adresse web de votre banque dans la barre d'adresse de votre navigateur favori, vous arrivez sur la page d'accueil d'un site en tout point identique au site de votre banque, en toute confiance, vous saisissez votre identifiant et votre mot de passe. C'est termin√© un "pirate" va pouvoir r√©cup√©rer
					votre identifiant et votre mot de passe ! Pourquoi ? Vous avez saisi l'adresse web de votre banque comme d'habitude ! Oui, sauf que gr√¢ce √† une attaque de type "DNS spoofing" vous avez √©t√© redirig√© vers un site pirate, en tout point identique au site de votre banque. D√®s vos identifiant et mot de passe saisis sur ce faux site, le pirate pourra les r√©cup√©rer et se rendre avec sur le v√©ritable site de votre banque.
					√Ä noter qu'il existe d'autres techniques que le DNS spoofing qui permettent de substituer un serveur √† un autre, mais elles ne seront pas √©voqu√©es ici.
				</li>
			</ul>
			<div class="centrer">
				<img src="img/nsi_term_secu_6.png"/>
				<figcaption>Attaque DNS Spoofing</figcaption>
			</div>
			<p>
				HTTPS est donc la version s√©curis√©e de HTTP, le but de HTTPS est d'√©viter les 2 probl√®mes √©voqu√©s ci-dessus. HTTPS s'appuie sur le protocole TSL (Transport Layer Security) anciennement connu sous le nom de SSL (Secure Sockets Layer)
			</p>
			<p>
				Comment chiffrer les donn√©es circulant entre le client et le serveur ?
			</p>
			<p>
				Les communications vont √™tre chiffr√©es gr√¢ce √† une cl√© sym√©trique. Probl√®me : comment √©changer cette cl√© entre le client et le serveur ? Simplement en utilisant une paire cl√© publique / cl√© priv√©e !
			</p>
			<p>
				Voici le d√©roulement des op√©rations :
			</p>
			<ul>
				<li>
					le client effectue une requ√™te HTTPS vers le serveur, en retour le serveur envoie sa cl√© publique (KpuS) au client
				</li>
				<li>
					le client "fabrique" une cl√© K (qui sera utilis√© pour chiffrer les futurs √©changes), chiffre cette cl√© K avec KpuS et envoie la version chiffr√©e de la cl√© K au serveur
				</li>
				<li>
					le serveur re√ßoit la version chiffr√©e de la cl√© K et la d√©chiffre en utilisant sa cl√© priv√©e (KprS). √Ä partir de ce moment-l√†, le client et le serveur sont en possession de la cl√© K
				</li>
				<li>
					le client et le serveur commencent √† √©changer des donn√©es en les chiffrant et en les d√©chiffrant √† l'aide de la cl√© K (chiffrement sym√©trique).
				</li>
			</ul>
			<p>
				On peut r√©sumer ce processus avec le sch√©ma suivant :
			</p>
			<div class="centrer">
				<img src="img/nsi_term_secu_7.png"/>
				<figcaption>principe protocole TSL</figcaption>
			</div>
			<p>
				Ce processus se r√©p√®te √† chaque fois qu'un nouveau client effectue une requ√™te HTTPS vers le serveur.
			</p>
			<p>
				Comment √©viter les cons√©quences f√¢cheuses d'une attaque de type DNS Spoofing ?
			</p>
			<p>
				Pour √©viter tout probl√®me, il faut que le serveur puisse justifier de son "identit√©" ("voici la preuve que je suis bien le site de la banque B et
				pas un site "pirate""). Pour se faire, chaque site d√©sirant proposer des transactions HTTPS doit, p√©riodiquement, demander (acheter dans la plupart des cas)
				un certificat d'authentification
				(sorte de carte d'identit√© pour un site internet) aupr√®s d'une autorit√© habilit√©e √† fournir
				ce genre de certificats (chaque navigateur web poss√®de une liste des autorit√©s dont il accepte les certificats). Comme dit plus haut, ce certificat permet au site de prouver son "identit√©" aupr√®s des clients.
				Nous n'allons pas entrer dans les d√©tails du fonctionnement de ces certificats, mais vous devez juste savoir que le serveur envoie ce certificat au client en m√™me temps que sa cl√© publique (√©tape 2 du sch√©ma ci-dessus).
				En cas d'absence de certificat (ou d'envoi de certificat non conforme), le client stoppe imm√©diatement les √©changes avec le serveur.
				Il peut arriver de temps en temps que le responsable d'un site oublie de renouveler son certificat √† temps (d√©passe la date d'expiration), dans ce cas, le navigateur web c√¥t√© client affichera une page de mise en garde avec un message du style "ATTENTION le certificat d'authentification du site XXX a expir√©, il serait prudent de ne pas poursuivre vos √©changes avec le site XXXX".
			</p>
			<hr />
			<img style="margin-bottom: 15px;" src="img/cc.png"/>
			<p>
				Auteur : David Roche
			</p>
		</div>
</html>
